#include <iostream>
#include <random>
#include "templates.hpp"

/**
 * @brief Генерирует динамический массив целых чисел с монотонно возрастающими значениями.
 * 
 * Функция создаёт массив, где первый элемент — случайное число из диапазона 
 * [-1'000'000'000; -5'000'000], а каждый следующий увеличивается на случайную 
 * величину из [0; 1'000'000]. Это гарантирует, что итоговый массив будет отсортирован.
 * 
 * @param n Размер генерируемого массива.
 * @return int* Указатель на новый массив в динамической памяти.
 * 
 * @warning Память выделяется через new[]. Освобождение памяти — обязанность вызывающей стороны.
 * @note При n == 0 возвращается указатель на пустой массив (размер 0).
 * 
 * @example
 * int* data = gen_random_array(100);
 * // ... использование ...
 * delete[] data;  // Не забыть освободить память!
 */
int* gen_random_array(std::size_t n) {
    // Источник энтропии для инициализации генератора
    std::random_device rd;

    // Выделение памяти под массив
    int* arr = new int[n];

    // Генератор случайных чисел Mersenne Twister с seed от random_device
    std::mt19937 gen(rd());

    // Распределение для первого элемента: большой отрицательный диапазон
    std::uniform_int_distribution<> distr(-1'000'000'000, -5'000'000);
    arr[0] = distr(gen);

    // Распределение для шагов приращения: [0; 1'000'000]
    std::uniform_int_distribution<> distr_cycle(0, 1'000'000);
    
    // Формируем монотонную последовательность
    for (std::size_t i = 1; i < n; ++i) {
        arr[i] = arr[i - 1] + distr_cycle(gen);
    }
    
    return arr;
}